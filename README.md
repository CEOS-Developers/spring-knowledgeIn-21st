# spring-knowledgeIn-21st

**CEOS Back-End 21st Naver Knowledge-In Clone Coding Project**

---

## 1. 서비스 설명

- 질문자는 질문 게시글을 등록한다.
- 해당 질문에 대해 다수의 사용자는 답변글을 작성 가능하다.
- 이때 **답변글에만 좋아요/싫어요** 표시가 가능하다.
- 질문글과 답변글 모두 **댓글을 추가할 수 있다**.  
  (이때 **삭제는 가능하지만 수정은 불가능**)

---

## 2. ERD 구조도

### 2-1. ERD 이미지

![ERD](./erd_picture.JPG)

### 2-2. ERD 설명

- **User - Post** : 1:N 관계 (한 명의 사용자는 여러 개의 게시글을 작성할 수 있음)
- **Post - PostThumb** : 1:N 관계 (한 게시글은 여러 개의 '좋아요'를 받을 수 있으며, '좋아요'는 사용자마다 한 번씩만 가능)
- **User - PostThumb** : 1:N 관계 (한 명의 사용자는 여러 게시글에 '좋아요'를 할 수 있음)
- **Post - Comment** : 1:N 관계 (한 게시글은 여러 개의 댓글을 가질 수 있음)
- **User - Comment** : 1:N 관계 (한 명의 사용자는 여러 개의 댓글을 작성할 수 있음)
- **Post - Image** : 1:N 관계 (한 게시글에 여러 개의 이미지를 첨부할 수 있음)
- **Post - PostHashTag** : 1:N 관계 (한 게시글은 여러 개의 해시태그를 가질 수 있음)
- **PostHashTag - HashTag** : N:1 관계 (여러 게시글이 같은 해시태그를 사용할 수 있음)
- **Post - Post (Self 참조)** : 1:N 관계 (질문글/답변글 관계 형성)

---

## 3. 설계하며 들었던 고민 지점

혹시 아래 내용들에 관한 리뷰어님들의 좋은 방법이 있다면 꼭 듣고싶습니다..!

### 질문글과 답변글 설계

- **Post 단일 엔티티 VS Question, Answer 두 개의 엔티티**
  - (결정) **Post 단일 엔티티**
  - **장점** : 구조의 단순함, 엔티티 추가 없이도 새로운 유형의 게시글 생성 가능
  - **단점** : 제약조건의 관리 비용 (PostType이 Answer인 경우 `parent_id`가 not null이어야 함)

### 해시태그 설계

- **HashTag 엔티티 VS List<String> 값 타입**
  - (결정) **HashTag 엔티티**
  - **장점** : 기능 확장성 (해시태그 기반 조회와 같은 추가 기능)
  - **단점** : 테이블 추가 비용

### PostThumb 레포지토리 설계

- **레포지토리 없이 Post에게 위임 VS PostThumbRepository 생성**
  - (결정) **Post에게 위임**
  - **장점** : 영속성 관리의 일관성 증가
  - **단점** : Post에 의존하게 됨 (PostThumb를 조회하기 위해서는 Post가 필요)

### 생성자 설계

- **Public 생성자 VS Private 생성자 & Static 팩토리 메서드**
  - (결정) **Static 팩토리 메서드**
  - **장점** : 연관관계 편의 메서드가 존재할 때, 객체를 생성했음에도 편의 메서드를 호출하지 않아 일관되지 않은 객체 관계를 가질 위험을 제거했다.
  - **단점** : 복잡성

---

## 4. 개선 필요점

- **좋아요는 유저당 한 번만 가능하도록 개선 필요**
- **답변글에만 좋아요/싫어요 가능하도록 개선 필요**
